<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign Up</title>
</head>
<body>
    <h1>Sign Up for Early Access</h1>
    <form id="signup-form">
        <label for="email">Enter your email:</label>
        <input type="email" id="email" required>
        <button type="submit">Sign Up</button>
    </form>

    <script>
        const urls = ["url1", "url2", "url3", "url4"]; // Your list of URLs
        let urlIndex = 0; // Tracking the next URL to assign

        // Function to get the next available URL in a circular rotation
        function getNextUrl() {
            const assignedUrl = urls[urlIndex];
            urlIndex = (urlIndex + 1) % urls.length; // Circular rotation (loops back to the start)
            return assignedUrl;
        }

        // Check if the user is already signed in by checking localStorage
        function checkIfSignedIn() {
            const assignedUrl = localStorage.getItem("userUrl");
            if (assignedUrl) {
                // Redirect the user to a different page (e.g., dashboard) if they already have a URL assigned
                window.location.href = "dashboard.html"; // Or wherever you want to send them
            }
        }

        // Call checkIfSignedIn on page load to auto-redirect returning users
        checkIfSignedIn();

        // Event listener for the signup form
        document.getElementById("signup-form").addEventListener("submit", (event) => {
            event.preventDefault();
            const email = document.getElementById("email").value;

            // If the user hasn't been assigned a URL before, assign them one
            if (!localStorage.getItem("userUrl")) {
                const assignedUrl = getNextUrl();
                console.log("Assigned URL: ", assignedUrl); // Log or use it as needed

                // Store the user's email and assigned URL in localStorage
                localStorage.setItem("userEmail", email);
                localStorage.setItem("userUrl", assignedUrl);

                // Redirect the user to the next page where they can view/share the URL
                window.location.href = "/share-3/form/"; // Or another page where you show the URL
            }
        });
    </script>
</body>
</html>
