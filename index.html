<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Beta Signup</title>
</head>
<body>
    <h1>Sign up to be notified of launch</h1>
    <form id="signup-form">
        <label for="email">Email:</label>
        <input type="email" id="email" required>
        <button type="submit">Sign Up</button>
    </form>
    <script src="landing.js"></script>
</body>
</html>

<script>
// List of URLs to be assigned
const urls = ["url1", "url2", "url3"]; // Add more URLs as needed

// Check for returning users
document.addEventListener("DOMContentLoaded", () => {
    const userEmail = localStorage.getItem("userEmail");
    const userUrl = localStorage.getItem("userUrl");

    if (userEmail && userUrl) {
        // Redirect returning user to the form page
        window.location.href = "/form/";
        return;
    }
});

document.getElementById("signup-form").addEventListener("submit", (event) => {
    event.preventDefault();

    const email = document.getElementById("email").value;
    const storedEmail = localStorage.getItem("userEmail");

    // Check if this email has already signed up and assigned a URL
    if (storedEmail === email) {
        // Redirect to form page if user already signed up
        window.location.href = "/form/";
        return;
    }

    // Retrieve the assigned URLs from localStorage, or initialize an empty array
    let assignedUrls = JSON.parse(localStorage.getItem("assignedUrls")) || [];

    // Find the next available URL
    let availableUrl = null;
    for (let url of urls) {
        if (!assignedUrls.includes(url)) {
            availableUrl = url;
            break;
        }
    }

    if (!availableUrl) {
        // Redirect if no URLs are available
        window.location.href = "no-urls.html";
        return;
    }

    // Assign the available URL to the user
    localStorage.setItem("userEmail", email);
    localStorage.setItem("userUrl", availableUrl);

    // Mark the URL as assigned in the list
    assignedUrls.push(availableUrl);
    localStorage.setItem("assignedUrls", JSON.stringify(assignedUrls));

    // Redirect to form page
    window.location.href = "/form/";
});



</script>
